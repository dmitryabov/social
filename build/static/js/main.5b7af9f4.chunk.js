(this["webpackJsonpreact-d"]=this["webpackJsonpreact-d"]||[]).push([[0],{12:function(e,t,a){e.exports={dialogs:"Dialogs_dialogs__2xRSA",dialogsItem:"Dialogs_dialogsItem__8wYI2",active:"Dialogs_active__2sQhs",messages:"Dialogs_messages__1w_Up"}},20:function(e,t,a){e.exports={describtionBlock:"ProfileInfo_describtionBlock__NVn2V",profileImg:"ProfileInfo_profileImg__3mXT7",profileInfo:"ProfileInfo_profileInfo__2IJgv"}},21:function(e,t,a){e.exports={userPhoto:"users_userPhoto__1_En6",selectedPage:"users_selectedPage__1mnwI",usersBlock:"users_usersBlock__3eQwa",userInfo:"users_userInfo__36dY-"}},26:function(e,t,a){e.exports={header:"Header_header__1VCKf",loginBlock:"Header_loginBlock__6mma5"}},30:function(e,t,a){e.exports={postsBlock:"MyPosts_postsBlock__2ifKf",posts:"MyPosts_posts__3tZ1c"}},43:function(e,t,a){e.exports=a.p+"static/media/spinner.859f1396.svg"},44:function(e,t,a){e.exports={item:"Post_item__ihtu9"}},45:function(e,t,a){e.exports=a.p+"static/media/images.3e3c1fcc.png"},46:function(e,t,a){e.exports=a(75)},5:function(e,t,a){e.exports={nav:"Navbar_nav__2imOE",item:"Navbar_item__zmMk4",active:"Navbar_active__3mbhk"}},51:function(e,t,a){},52:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(22),o=a.n(s),l=(a(51),a(52),a(14)),i=a(15),c=a(18),u=a(16),m=a(26),g=a.n(m),p=a(4),d=function(e){return r.a.createElement("header",{className:g.a.header},r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Ethereum_logo_2014.svg/1200px-Ethereum_logo_2014.svg.png",alt:"logo"}),r.a.createElement("div",{className:g.a.loginBlock},e.isAuth?e.login:r.a.createElement(p.b,{to:"/login"},"Login")))},f=a(10),E=a(1),v={userId:null,email:null,login:null,isAuth:!1},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(E.a)(Object(E.a)(Object(E.a)({},e),t.data),{},{isAuth:!0});default:return e}},b=a(42),_=a.n(b).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"007e2c26-de46-4d39-95cc-d77ad4be9457"}}),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return _.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},O=function(e){return _.get("profile/".concat(e)).then((function(e){return e.data}))},T=function(e){return _.get("auth/".concat(e)).then((function(e){return e.data}))},w=function(e){return _.delete("follow/".concat(e)).then((function(e){return e.data}))},I=function(e){return _.post("follow/".concat(e),{}).then((function(e){return e.data}))},N=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;T("me").then((function(t){if(0===t.resultCode){var a=t.data,n=a.id,r=a.email,s=a.login;e.props.setAuthData(n,r,s)}}))}},{key:"render",value:function(){return r.a.createElement(d,this.props)}}]),a}(r.a.Component),j=Object(f.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{setAuthData:function(e,t,a){return{type:"SET_USER_DATA",data:{userId:e,email:t,login:a}}}})(N),S=a(5),A=a.n(S),C=function(){return r.a.createElement("nav",{className:A.a.nav},r.a.createElement("div",{className:A.a.item},r.a.createElement(p.b,{to:"/profile",activeClassName:A.a.active},"Profile")),r.a.createElement("div",{className:"".concat(A.a.item," ").concat(A.a.active)},r.a.createElement(p.b,{to:"/dialogs",activeClassName:A.a.active},"Message")),r.a.createElement("div",{className:A.a.item},r.a.createElement(p.b,{to:"/news",activeClassName:A.a.active},"News")),r.a.createElement("div",{className:A.a.item},r.a.createElement(p.b,{to:"/music",activeClassName:A.a.active},"Music")),r.a.createElement("div",{className:A.a.item},r.a.createElement(p.b,{to:"/settincs",activeClassName:A.a.active},"Settincs")),r.a.createElement("div",{className:A.a.item},r.a.createElement(p.b,{to:"/users",activeClassName:A.a.active},"Users")))},k=function(){return r.a.createElement("div",null,"News")},y=function(){return r.a.createElement("div",null,"Music")},U=function(){return r.a.createElement("div",null,"Settincs")},x=a(20),F=a.n(x),M=a(43),R=a.n(M),L=function(e){return r.a.createElement("div",null,r.a.createElement("img",{src:R.a,alt:"prelouder"}))},D=function(e){return e.profile?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("img",{className:F.a.profileImg,src:"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcTNA4_AMnRYJ-J-VUt-LWFkLM2VQ8ZKhyaqYA&usqp=CAU",alt:"avatar"})),r.a.createElement("div",{className:F.a.describtionBlock},r.a.createElement("img",{className:F.a.profileAva,src:e.profile.photos.large,alt:"You "}),r.a.createElement("div",{className:F.a.profileInfo},r.a.createElement("div",null,"\u041e \u0431\u043e \u043c\u043d\u0435: "+e.profile.aboutMe),r.a.createElement("div",null,e.profile.lookingForAJob?"\u0418\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443":"\u041d\u0435 \u0438\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443"),r.a.createElement("div",null,e.profile.lookingForAJobDescription),r.a.createElement("div",null,"\u041f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f "+e.profile.fullName)))):r.a.createElement(L,null)},G=a(17),B={posts:[{id:"1",message:"hi",like:"3"},{id:"2",message:"how are you",like:5}],newPostText:"",profile:null},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var a=e.newPostText;return Object(E.a)(Object(E.a)({},e),{},{newPostText:"",posts:[].concat(Object(G.a)(e.posts),[{id:"3",message:a,like:"3"}])});case"UPDATE-NEW-POST-TEXT":return Object(E.a)(Object(E.a)({},e),{},{newPostText:t.postText});case"SER_USER_PROFILE":return Object(E.a)(Object(E.a)({},e),{},{profile:t.profile});default:return e}},z=a(44),J=a.n(z),q=function(e){return r.a.createElement("div",{className:J.a.item},r.a.createElement("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSxLkbtTa0kfmKizxJgqECQLdlt_xq1R2jEQQ&usqp=CAU",alt:"ava"}),e.message,r.a.createElement("div",null,r.a.createElement("span",null,"like"),r.a.createElement("span",null,e.like)))},K=a(30),Q=a.n(K),Y=function(e){var t=e.posts.map((function(e){return r.a.createElement(q,{message:e.message,key:e.id,like:e.like})})),a=r.a.createRef();return r.a.createElement("div",{className:Q.a.postsBlock},r.a.createElement("h3",null,"my post"),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("textarea",{onChange:function(){var t=a.current.value;e.updatePostAction(t)},ref:a,value:e.newPostText})),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){e.addPost()}},"add post"))),r.a.createElement("div",{className:Q.a.posts},t))},V=Object(f.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{updatePostAction:function(t){var a=function(e){return{type:"UPDATE-NEW-POST-TEXT",postText:e}}(t);e(a)},addPost:function(){e({type:"ADD-POST"})}}}))(Y),X=function(e){return r.a.createElement("div",null,r.a.createElement(D,{profile:e.profile}),r.a.createElement(V,null))},H=a(3),Z=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.userId;t||(t=2),O(t).then((function(t){e.props.setUserProfile(t)}))}},{key:"render",value:function(){return r.a.createElement(X,Object.assign({},this.props,{profile:this.props.profile}))}}]),a}(r.a.Component),$=Object(H.e)(Z),ee=Object(f.b)((function(e){return{profile:e.profilePage.profile}}),{setUserProfile:function(e){return{type:"SER_USER_PROFILE",profile:e}}})($),te={dialogs:[{id:"1",name:"Dmitry"},{id:"2",name:"Anna"},{id:"3",name:"Ivan"},{id:"4",name:"Katy"},{id:"5",name:"Atrem"}],messages:[{id:"1",message:"hi"},{id:"2",message:"how are you"},{id:"3",message:"goog"},{id:"4",message:"i like it"},{id:"5",message:"I am cool"}],newMessageText:""},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-MESSAGE":var a=e.newMessageText;return Object(E.a)(Object(E.a)({},e),{},{newMessageText:"",messages:[].concat(Object(G.a)(e.messages),[{id:"6",message:a}])});case"UPDATE-NEW-MESSAGE-TEXT":return Object(E.a)(Object(E.a)({},e),{},{newMessageText:t.messageText});default:return e}},ne=a(12),re=a.n(ne),se=function(e){return r.a.createElement("div",{className:re.a.dialog+" "+re.a.active},r.a.createElement(p.b,{to:"/dialogs/"+e.id},e.name))},oe=function(e){return r.a.createElement("div",{className:re.a.message},e.message)},le=function(e){var t=r.a.createRef();return r.a.createElement("div",{className:re.a.dialogs},r.a.createElement("div",{className:re.a.dialogsItem},e.dialogs.map((function(e){return r.a.createElement(se,{name:e.name,key:e.id,id:e.id})}))),r.a.createElement("div",{className:re.a.messages},e.messages.map((function(e){return r.a.createElement(oe,{message:e.message,key:e.id})})),r.a.createElement("div",null,r.a.createElement("textarea",{onChange:function(){var a=t.current.value;e.updateMessageAction(a)},ref:t,value:e.newMessageText,placeholder:"Enter your message"})),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){e.addMessageAction()}},"add message"))))},ie=Object(f.b)((function(e){return{dialogs:e.messagePage.dialogs,messages:e.messagePage.messages,newMessageText:e.messagePage.newMessageText}}),(function(e){return{updateMessageAction:function(t){var a=function(e){return{type:"UPDATE-NEW-MESSAGE-TEXT",messageText:e}}(t);e(a)},addMessageAction:function(){e({type:"ADD-MESSAGE"})}}}))(le),ce={users:[],pageSize:5,totalUserCount:0,currentPage:1,isFetching:!0,followingInPropgress:[]},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(E.a)(Object(E.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(E.a)(Object(E.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(E.a)(Object(E.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(E.a)(Object(E.a)({},e),{},{followed:!1}):e}))});case"SET_USERS":return Object(E.a)(Object(E.a)({},e),{},{users:t.users});case"SET_CURRENT_PAGE":return Object(E.a)(Object(E.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(E.a)(Object(E.a)({},e),{},{totalUserCount:t.totalUserCount});case"TOGGLE_IS_FETCHINT":return Object(E.a)(Object(E.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(E.a)(Object(E.a)({},e),{},{followingInPropgress:t.followingInPropgress?[].concat(Object(G.a)(e.followingInPropgress),[t.userId]):e.followingInPropgress.filter((function(e){return e!==t.userId}))});default:return e}},me=a(21),ge=a.n(me),pe=a(45),de=a.n(pe),fe=function(e){for(var t=Math.ceil(e.totalUserCount/e.pageSize),a=[],n=1;n<=t;n++)a.push(n);return r.a.createElement("div",{className:ge.a.usersBlock},r.a.createElement("div",null,a.map((function(t){return r.a.createElement("span",{onClick:function(){return e.onPageChanged(t)},className:e.currentPage===t&&ge.a.selectedPage},t)}))),e.users.map((function(t){return r.a.createElement("div",{className:ge.a.userInfo,key:t.d+t.fullName},r.a.createElement("span",null,r.a.createElement("div",null,r.a.createElement(p.b,{to:"/profile/"+t.id},r.a.createElement("img",{src:null!==t.photos.small?t.photos.small:de.a,alt:"ava",className:ge.a.userPhoto}))),r.a.createElement("div",null,t.followed?r.a.createElement("button",{disabled:e.followingInPropgress.some((function(e){return e===t.id})),onClick:function(){e.setIsToggleFollowingProgress(!0,t.id),w(t.id).then((function(a){0===a.resultCode&&e.unfollow(t.id),e.setIsToggleFollowingProgress(!1,t.id)}))}},"UnFollow"):r.a.createElement("button",{disabled:e.followingInPropgress.some((function(e){return e===t.id})),onClick:function(){e.setIsToggleFollowingProgress(!0,t.id),I(t.id).then((function(a){0===a.resultCode&&e.follow(t.id),e.setIsToggleFollowingProgress(!1,t.id)}))}},"Follow"))),r.a.createElement("span",null,r.a.createElement("span",null,r.a.createElement("div",null,t.name),r.a.createElement("div",null,t.status)),r.a.createElement("span",null,r.a.createElement("div",null,"user.location.country"),r.a.createElement("div",null,"user.location.city"))))})))},Ee=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.setIsToggleFetching(!0),P(t,e.props.pageSize).then((function(t){e.props.setIsToggleFetching(!1),e.props.setUsers(t.items)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.setIsToggleFetching(!0),P(this.props.currentPage,this.props.pageSize).then((function(t){e.props.setIsToggleFetching(!1),e.props.setUsers(t.items),e.props.setTotalUsersCount(t.totalCount/100)}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.isFetching?r.a.createElement(L,null):null,r.a.createElement(fe,{onPageChanged:this.onPageChanged,totalUserCount:this.props.totalUserCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,users:this.props.users,unfollow:this.props.unfollow,follow:this.props.follow,setIsToggleFollowingProgress:this.props.setIsToggleFollowingProgress,followingInPropgress:this.props.followingInPropgress}))}}]),a}(r.a.Component),ve=Object(f.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUserCount:e.usersPage.totalUserCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInPropgress:e.usersPage.followingInPropgress}}),{follow:function(e){return{type:"FOLLOW",userId:e}},unfollow:function(e){return{type:"UNFOLLOW",userId:e}},setUsers:function(e){return{type:"SET_USERS",users:e}},setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},setTotalUsersCount:function(e){return{type:"SET_TOTAL_USERS_COUNT",totalUserCount:e}},setIsToggleFetching:function(e){return{type:"TOGGLE_IS_FETCHINT",isFetching:e}},setIsToggleFollowingProgress:function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",followingInPropgress:e,userId:t}}})(Ee);var he=function(e){return r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(j,null),r.a.createElement(C,null),r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(H.a,{path:"/profile/:userId?",render:function(){return r.a.createElement(ee,null)}}),r.a.createElement(H.a,{path:"/dialogs",render:function(){return r.a.createElement(ie,null)}}),r.a.createElement(H.a,{path:"/news",component:k}),r.a.createElement(H.a,{path:"/music",component:y}),r.a.createElement(H.a,{path:"/settincs",component:U}),r.a.createElement(H.a,{path:"/users",render:function(){return r.a.createElement(ve,null)}})))},be={},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be;return e},Pe=a(25),Oe=(0,Pe.createStore)((0,Pe.combineReducers)({profilePage:W,messagePage:ae,sidebar:_e,usersPage:ue,auth:h}));window.store=Oe,o.a.render(r.a.createElement(p.a,null,r.a.createElement(f.a,{store:Oe},r.a.createElement(he,null))),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.5b7af9f4.chunk.js.map